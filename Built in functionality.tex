\section{Built-in functionality}
\label{builtin}

In this section, we go through a specific use-case of Iris to showcase its main functionalities. We build, inspect, and fit a SED of the flat radio spectrum quasar (FRSQ) blazar PKS 1127-14, and save our results to file. In Section \ref{sec:components}, we describe how these functions work in terms of the Iris stack.

\subsection{Building the SED}

As stated in Section \ref{sec:everyday_seds}, Iris can read data from a variety of sources in different formats. In Figure \ref{fig:load_data}, we have loaded PLANCK data in the form of an ASCII spectrum file (where there is a column for the spectral, flux, and flux errors) and a photometry catalog-style SAMP message of WISE data from TOPCAT. When Iris receives data in non-VO compliant formats, Iris opens file reader GUIs in which the user provides the mapping for the spectral, flux and flux uncertainties. The file importers provide helpful hints for the user when filling in the forms.

Wanting to analyze the entire SED of the blazer, the user queries the NED database for photometric data through the NED SED Service portal in Iris. The data is automatically added to the SED Builder and the display. The user then opens the ASDC Data Center, which provides more control over the data being added to the plot; he/she types the target name, chooses observation date ranges, selects optical/UV data from SWIFT and GALEX, and imports the data to the SED. The results are shown in Figure \ref{fig:load_data}.

\subsection{Inspecting the SED}

With all of the data uploaded, the user may switch the spectral and flux units; Iris takes care of all unit conversions once the data is read in. Before starting a fitting session, the user wants to remove from the SED data without flux uncertainty measurements. The user opens the Metadata Browser from the plotting display (SED Viewer), switches to the Data tab, and types a Python-expression into the Boolean filter to highlight the points whose error measuments are above 0 (i.e. points that have uncertainty measurements). With the desired data points hilgihted in the window, the user clicks "Create new SED;" this adds another SED to the SED Builder, which is managed separately from our original dataset.

At this point, the user chooses to shift the SED to restframe. PKS 1127-14 is at redshift z=1.18. The user opens up the Science tool by clicking the "Shift, Interpolate, Integrate" icon on the Iris desktop; under "Redshift," he/she types 1.18 into the Initial field, and leaves 0 in the Final box, finally creating a new SED in the restframe.

The user decides to save the SED they built to a file. SEDs are saved in VO-compliant FITS or VOTable formats which can be re-read into Iris or other programs (e.g. TOPCAT; IDL or Python interpreters). Users can save all of the metadata associated with the SEDs, or choose to save just the spectral, flux and flux uncertainties in a simplier format.

\subsection{Fitting the SED}

The user starts a fitting session by opening the Fitting Tool component on the Iris desktop. The SED Viewer updates with an overplotted (but unfit) powerlaw model, and a plot of the residuals shown below the data. The user removes the powerlaw component, and adds four models from the Preset Components provided by Sherpa: two logarithmic parabolas (\texttt{logparabola}s) for the radio synchrotron and inverse Compton radiation and two blackbodies (\texttt{blackbody}s) for the hot dust and accretion disk. The models are added to the Components field, where the model parameter values are displayed. Double-clicking a component allows you to edit the parameters, e.g. freeze and thaw parameters, reset their initial values, and set their minimum and maximum values. 

In the Model Expression field, the components are combined in arbitrary ways. Each component is given an ID which is used to reference the component in the Model Expression field. The user can also set the data ranges to be fit. In this example, we linearly combine the models, adding and fitting them one-by-one, defining the data ranges for each component (Figure \ref{fig:fitting}a, then freezing the component afterwards. For each fit, we use Neldermead optimization and least squares as the statistic. We thaw all components and refit the entire SED; the result is shown in Figure \ref{fig:fitting}b. 

The user saves the fit results to a text file, showing the fit statistics, model used, and the best-fit parameter values. He/she can also save an XML-style file of the model that can be re-read into Iris and fit to other SED data.